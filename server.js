const express = require('express'); const mongoose = require('mongoose'); const jwt = require('jsonwebtoken'); const bodyParser = require('body-parser'); const app = express(); app.use(bodyParser.json()); mongoose.connect('mongodb://localhost:27017/mydatabase', { useNewUrlParser: true, useUnifiedTopology: true }); const User = mongoose.model('User', new mongoose.Schema({ email: String, password: String })); const Task = mongoose.model('Task', new mongoose.Schema({ title: String, description: String, dueDate: Date, completed: Boolean })); app.post('/api/register', async (req, res) => { const user = new User(req.body); await user.save(); res.status(201).send(user); }); app.post('/api/login', async (req, res) => { const user = await User.findOne({ email: req.body.email }); if (!user || user.password !== req.body.password) return res.status(401).send('Invalid credentials'); const token = jwt.sign({ id: user._id }, 'secret'); res.send({ token }); }); app.post('/api/tasks', async (req, res) => { const task = new Task(req.body); await task.save(); res.status(201).send(task); }); app.put('/api/tasks/:id', async (req, res) => { const task = await Task.findByIdAndUpdate(req.params.id, req.body, { new: true }); res.send(task); }); app.delete('/api/tasks/:id', async (req, res) => { await Task.findByIdAndDelete(req.params.id); res.status(204).send(); }); app.patch('/api/tasks/:id/complete', async (req, res) => { const task = await Task.findByIdAndUpdate(req.params.id, { completed: true }, { new: true }); res.send(task); }); app.get('/api/tasks', async (req, res) => { const tasks = await Task.find(req.query); res.send(tasks); }); app.get('/api/notifications', (req, res) => { res.send('Notifications'); }); app.listen(3000, () => { console.log('Server is running on port 3000'); });