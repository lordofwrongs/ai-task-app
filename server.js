const express = require('express'); const mongoose = require('mongoose'); const nodemailer = require('nodemailer'); const app = express(); app.use(express.json()); mongoose.connect('mongodb://localhost:27017/myapp', { useNewUrlParser: true, useUnifiedTopology: true }); const UserSchema = new mongoose.Schema({ email: String, password: String }); const TaskSchema = new mongoose.Schema({ title: String, description: String, priority: String, dueDate: String }); const User = mongoose.model('User', UserSchema); const Task = mongoose.model('Task', TaskSchema); app.post('/api/register', async (req, res) => { const { email, password } = req.body; const user = new User({ email, password }); await user.save(); res.json({ status: 'success', message: 'User registered' }); }); app.post('/api/login', async (req, res) => { const { email, password } = req.body; const user = await User.findOne({ email, password }); if (user) { res.json({ status: 'success', message: 'Login successful', token: 'dummy_token' }); } else { res.json({ status: 'error', message: 'Invalid credentials' }); } }); app.post('/api/tasks', async (req, res) => { const { title, description, priority, dueDate } = req.body; const task = new Task({ title, description, priority, dueDate }); await task.save(); res.json({ status: 'success', taskId: task._id }); }); app.put('/api/tasks/:taskId', async (req, res) => { const { taskId } = req.params; await Task.findByIdAndUpdate(taskId, req.body); res.json({ status: 'success' }); }); app.delete('/api/tasks/:taskId', async (req, res) => { const { taskId } = req.params; await Task.findByIdAndDelete(taskId); res.json({ status: 'success' }); }); app.post('/api/notifications/settings', (req, res) => { const { emailNotifications, inAppNotifications } = req.body; // Save settings logic here res.json({ status: 'success' }); }); app.listen(3000, () => { console.log('Server is running on port 3000'); });