const express = require('express'); const mongoose = require('mongoose'); const jwt = require('jsonwebtoken'); const nodemailer = require('nodemailer'); const bodyParser = require('body-parser'); const app = express(); app.use(bodyParser.json()); mongoose.connect('mongodb://localhost:27017/mydatabase', { useNewUrlParser: true, useUnifiedTopology: true }); const User = mongoose.model('User', new mongoose.Schema({ email: String, password: String })); const Task = mongoose.model('Task', new mongoose.Schema({ title: String, description: String, due_date: Date, category: String })); app.post('/api/register', async (req, res) => { const user = new User(req.body); await user.save(); res.send({ message: 'User registered', confirmation_sent: true }); }); app.post('/api/login', async (req, res) => { const user = await User.findOne(req.body); if (user) { const token = jwt.sign({ id: user._id }, 'secret'); res.send({ token }); } else { res.status(401).send({ error: 'Invalid credentials' }); } }); app.post('/api/tasks', async (req, res) => { const task = new Task(req.body); await task.save(); res.send({ task_id: task._id, message: 'Task created' }); }); app.put('/api/tasks/:id', async (req, res) => { await Task.findByIdAndUpdate(req.params.id, req.body); res.send({ message: 'Task updated' }); }); app.delete('/api/tasks/:id', async (req, res) => { await Task.findByIdAndDelete(req.params.id); res.send({ message: 'Task deleted' }); }); app.post('/api/tasks/category', async (req, res) => { await Task.findByIdAndUpdate(req.body.task_id, { category: req.body.category }); res.send({ message: 'Category updated' }); }); app.post('/api/tasks/due-date', async (req, res) => { await Task.findByIdAndUpdate(req.body.task_id, { due_date: req.body.due_date }); res.send({ message: 'Due date updated' }); }); app.get('/api/tasks', async (req, res) => { const tasks = await Task.find(); res.send({ tasks }); }); app.post('/api/tasks/export', (req, res) => { res.send({ file_url: 'http://example.com/exported-file' }); }); app.post('/api/tasks/import', (req, res) => { res.send({ message: 'Tasks imported' }); }); app.listen(3000, () => { console.log('Server running on port 3000'); });